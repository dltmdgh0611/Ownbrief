# Welcome 페이지 가이드

## 📋 개요

로그인하지 않은 사용자를 위한 첫 화면(커버 온보딩 페이지)입니다.

## 🎯 목적

- 앱을 처음 켰을 때 임팩트 있는 첫인상 제공
- 서비스의 핵심 가치 전달
- 간편한 Google 로그인 유도

## 🔄 사용자 플로우

### 전체 플로우
```
앱 시작 (/)
    ↓
로그인 상태 확인
    ↓
┌─────────────────┴─────────────────┐
│                                   │
로그인 안 됨                    로그인 됨
│                                   │
↓                                   ↓
/welcome                     온보딩 상태 확인
│                                   │
Google 로그인                ┌──────┴──────┐
│                            │             │
↓                         완료됨        안 됨
/ (홈)                      │             │
                            ↓             ↓
                         홈 화면     /onboarding
                                         │
                                    완료 후
                                         │
                                         ↓
                                      홈 화면
```

### Welcome 페이지 상세 플로우
```
1. 사용자가 / 접속
   ↓
2. 로그인 상태 확인
   ↓
3. 로그인 안 됨 → /welcome 리다이렉트
   ↓
4. Welcome 페이지 표시
   - 환영 메시지
   - 핵심 가치 제안
   - Google 로그인 버튼
   ↓
5. Google 로그인 클릭
   ↓
6. Google 인증 완료
   ↓
7. / (홈)으로 리다이렉트
   ↓
8. 온보딩 상태 확인
   - 신규 사용자 → /onboarding
   - 기존 사용자 → 홈 화면
```

## 📁 파일 구조

```
app/
├── page.tsx                 # 메인 홈 (로그인된 사용자만)
├── welcome/
│   └── page.tsx            # 커버 온보딩 페이지 (로그인 전)
├── onboarding/
│   └── page.tsx            # 사용자 온보딩 (로그인 후, 신규 사용자)
└── settings/
    └── page.tsx            # 설정 페이지
```

## 🎨 Welcome 페이지 디자인

### 레이아웃
1. **로고 & 환영 메시지**
   - 큰 아이콘 (Mic2)
   - "Welcome!" 제목
   - "온브리프와 함께 새로운 아침을 맞이해보세요"
   - Figma 디자인 반영

2. **핵심 가치 제안 카드 (3개)**
   - AI 맞춤 팟캐스트
   - 15분의 인사이트
   - 매일 성장하는 나

3. **Google 로그인 버튼**
   - 크고 눈에 띄는 버튼
   - Google 로고 포함
   - 이용약관 동의 문구

### 색상 및 스타일
- **배경**: Emerald-Teal 그라데이션
- **카드**: 흰색 배경, 그림자 효과
- **아이콘**: 그라데이션 배경 (Emerald → Teal → Cyan → Blue)
- **애니메이션**: fade-in 효과

## 💻 코드 구조

### app/welcome/page.tsx

```tsx
// 주요 기능
1. 세션 확인 (useSession)
2. 로그인된 사용자 리다이렉트 (useEffect)
3. Google 로그인 버튼 (signIn)
```

### app/page.tsx

```tsx
// 주요 기능
1. 로그인 안 된 사용자 → /welcome 리다이렉트
2. 로그인 + 온보딩 필요 → /onboarding 리다이렉트
3. 로그인 + 온보딩 완료 → 홈 화면 표시
```

## 🔐 보안 및 인증

### NextAuth 설정
```typescript
// backend/lib/auth.ts
export const authOptions: NextAuthOptions = {
  providers: [GoogleProvider({ ... })],
  callbacks: {
    // userId를 세션에 포함
    session({ session, token }) {
      session.user.id = token.userId
      return session
    }
  }
}
```

### 페이지별 접근 제어

| 페이지 | 로그인 필요 | 온보딩 완료 필요 | 리다이렉트 |
|--------|------------|----------------|-----------|
| `/welcome` | ❌ | ❌ | 로그인 시 `/` |
| `/` | ✅ | ✅ | 미로그인 시 `/welcome`<br>온보딩 필요 시 `/onboarding` |
| `/onboarding` | ✅ | ❌ | 완료 시 `/` |
| `/settings` | ✅ | ✅ | 미로그인 시 `/` |

## 📊 사용자 시나리오

### 시나리오 1: 완전히 새로운 사용자
```
1. 앱 실행 (/)
   → /welcome으로 자동 리다이렉트

2. Welcome 페이지 표시
   - 환영 메시지 확인
   - 핵심 기능 소개 읽기

3. "Google로 시작하기" 버튼 클릭
   → Google 인증 페이지

4. Google 계정 선택 및 권한 승인
   → / (홈)으로 리다이렉트

5. 온보딩 상태 확인
   → /onboarding으로 자동 리다이렉트

6. 관심사 선택 (Step 1)
7. 플레이리스트 선택 (Step 2)
8. 완료 → 홈 화면
```

### 시나리오 2: 기존 사용자 재방문
```
1. 앱 실행 (/)
   → 세션 확인

2. 로그인 상태 유효
   → 온보딩 완료 확인

3. 온보딩 완료됨
   → 바로 홈 화면 표시
```

### 시나리오 3: 로그아웃 후 재접속
```
1. 앱 실행 (/)
   → 세션 만료 확인

2. 로그인 안 됨
   → /welcome으로 리다이렉트

3. Welcome 페이지 표시
4. 로그인 후 바로 홈 화면
   (이미 온보딩 완료됨)
```

## 🎨 UI 컴포넌트

### Google 로그인 버튼
```tsx
<button
  onClick={() => signIn('google', { callbackUrl: '/' })}
  className="..."
>
  <GoogleLogo />
  <span>Google로 시작하기</span>
</button>
```

### 핵심 가치 카드
```tsx
<div className="app-card p-5 bg-white fade-in">
  <div className="flex items-center space-x-4">
    <div className="gradient-icon">
      <Icon />
    </div>
    <div>
      <h3>제목</h3>
      <p>설명</p>
    </div>
  </div>
</div>
```

## 📈 A/B 테스트 가능 요소

### 메시지 변형
- [ ] "Welcome!" vs "환영합니다!"
- [ ] 긴 설명 vs 짧은 설명
- [ ] "새로운 아침" vs "스마트한 아침"

### 버튼 텍스트
- [ ] "Google로 시작하기"
- [ ] "Google로 로그인"
- [ ] "3초만에 시작하기"

### 카드 순서
- [ ] AI 맞춤 → 15분 → 성장
- [ ] 15분 → AI 맞춤 → 성장

## 🚀 배포 체크리스트

- [x] Welcome 페이지 생성 (`app/welcome/page.tsx`)
- [x] 메인 페이지 리다이렉트 로직 추가
- [x] Google 로그인 버튼 동작 확인
- [x] 세션 상태 기반 리다이렉트 테스트
- [x] 모바일 반응형 확인
- [x] 애니메이션 부드러움 확인

## 🔍 테스트 방법

### 1. 로그아웃 상태 테스트
```bash
# 브라우저 시크릿 모드 실행
# 또는 세션 삭제
1. / 접속
2. /welcome으로 리다이렉트 확인
3. 페이지 내용 확인
4. Google 로그인 버튼 클릭
5. 로그인 후 / 로 돌아오는지 확인
```

### 2. 로그인 상태 테스트
```bash
1. 로그인 상태로 /welcome 직접 접속
2. / 로 자동 리다이렉트 확인
3. 온보딩 상태에 따라 적절한 페이지 표시 확인
```

### 3. 리다이렉트 루프 방지 확인
```bash
# 무한 리다이렉트가 발생하지 않는지 확인
1. 로그아웃 → / → /welcome (OK)
2. 로그인 → /welcome → / (OK)
3. 로그인 + 온보딩 필요 → / → /onboarding (OK)
```

## 📱 모바일 최적화

### 화면 크기별 조정
- **모바일 (< 768px)**
  - 아이콘 크기: 24 → 20
  - 제목 크기: 4xl → 3xl
  - 패딩: py-8 → py-6

- **태블릿 (768px ~ 1024px)**
  - 최대 너비: 480px
  - 중앙 정렬

- **데스크톱 (> 1024px)**
  - 최대 너비: 480px
  - 중앙 정렬

## 🎯 핵심 메트릭

### 추적할 지표
1. **페이지 뷰**: `/welcome` 방문 수
2. **로그인 클릭률**: Google 버튼 클릭 / 페이지 뷰
3. **로그인 완료율**: 실제 로그인 / 버튼 클릭
4. **평균 체류 시간**: 페이지에서 머문 시간
5. **이탈률**: 로그인 없이 떠난 비율

## 💡 향후 개선 사항

### 단기 (1-2주)
- [ ] 실제 사용자 리뷰 표시
- [ ] 짧은 데모 영상/GIF
- [ ] 애니메이션 개선

### 중기 (1-2개월)
- [ ] 다국어 지원 (영어, 일본어)
- [ ] 소셜 로그인 추가 (Apple, Kakao)
- [ ] 스크롤 기반 애니메이션

### 장기 (3개월+)
- [ ] 인터랙티브 데모
- [ ] 개인화된 추천 미리보기
- [ ] 온보딩 건너뛰기 옵션

## 📚 참고 자료

- **Figma 디자인**: "MCP Ownbrief" - 처음 사용자 인사 화면
- **NextAuth 문서**: https://next-auth.js.org/
- **기존 온보딩 가이드**: `ONBOARDING_GUIDE.md`

---

## 🎉 완료!

로그인 전 사용자에게 매력적인 첫인상을 제공하는 Welcome 페이지가 완성되었습니다! 🚀

